(()=>{"use strict";const e={method:"GET",headers:{"X-RapidAPI-Key":"af437dcf0amsh10b8ba5137538edp11d116jsnbc2af18c8691","X-RapidAPI-Host":"wft-geo-db.p.rapidapi.com"}},n="forecast",t="forecast__inner__list__item__data__item",i="forecast__inner__list__item__title",s="weather__inner__left__box",a="weather__inner__left__box__main",_="weather__inner__left__box__main__icon",r="weather__inner__left__box__main__temp",c="weather__inner__left__box__main__temp__value",o="weather__inner__left__box__main__temp__icon",d="weather__inner__left__box__main__description",l="weather__inner__right__item__value",u="city__name",m="display",p=`\n    <div class="${a}">\n        <svg  class="${_}">\n            <use xlink:href="img/icons/icons.svg#404"></use>\n        </svg>\n        <div class="${r}">\n            <div class="${c}">\n                <span>--</span>&deg;\n            </div>\n            <svg  class="${o}">\n                <use xlink:href="img/icons/icons.svg#metric"></use>\n            </svg>\n        </div>\n        <p class="${d}">Please, try again!</p>\n    </div>`,h=e=>{let n=document.querySelector(".weather__inner__left__title");n.textContent=`${e}`,n.classList.add(`${u}`),setTimeout((()=>{n.classList.remove(`${u}`)}),1e3)},v=async e=>{(()=>{let e=document.querySelector(`.${_}`);e.innerHTML='<use xlink:href="img/icons/icons.svg#satellite"></use>',e.classList.add("loader-satellite")})();try{const t=await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${e.city}&units=${e.units}&APPID=83de6bb90ef948d5414ac411b62cad61`),i=await t.json();if("200"===i.cod)return i;h("Oops! Your location is not found :("),document.querySelector(`.${s}`).innerHTML=p,document.querySelector(`.${_}`).classList.add("animate_404"),document.querySelectorAll(`.${l} > span`).forEach((e=>e.innerHTML="--")),document.querySelector(`.${n}`).classList.remove(`${m}`)}catch(e){console.error(e)}},g=(e,n)=>{let t=new Date(1e3*e);const i=t.getDay();let s=[_(t.getDate()),_(t.getMonth()+1)].join("."),a=[_(t.getHours()),_(t.getMinutes())].join(":");function _(e){return+e<10?"0"+e:e}return"time"===n?a:`${s}\n${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][i]}`},$=e=>{const n=document.querySelectorAll("input[name=units]:checked");return`<li class="forecast__inner__list__item">\n                        <div class="forecast__inner__list__item__day-time">\n                            <div>${e.day}</div>\n                            <div>${e.time}</div>\n                        </div>\n                        <div class="forecast__inner__list__item__data">\n                            <div class="forecast__inner__list__item__icon ${t}">\n                                <svg  class="weather__inner__right__item__icon">\n                                    <use xlink:href="img/icons/icons.svg#${e.icon}"></use>\n                                </svg>\n                            </div>\n\n                            <div class="forecast__inner__list__item__temp ${t}">\n                                <h3 class="${i}">temp</h3>\n                                <div><span>${e.temp}</span>&deg;</div>\n                            </div>\n\n                            <div class="forecast__inner__list__item__wind ${t}">\n                                <h3 class="${i}">wind</h3>\n                                <div><span>${e.wind}</span>${"imperial"===n[0].value?"mph":"m/s"}</div>\n                            </div>\n\n                            <div class="forecast__inner__list__item__pop ${t}">\n                                <h3 class="${i}">pop</h3>\n                                <div><span>${e.pop}</span>&#37;</div>\n                            </div>\n                        </div>\n                    </li>`},y=e=>{h(e.city.name),(e=>{const n=document.querySelectorAll("input[name=units]:checked"),t=e.weather[0].icon,i=Math.round(e.main.temp),l=e.weather[0].description,u=n[0].value,m=`<div class="${a}">\n                        <svg  class="${_}">\n                            <use xlink:href="img/icons/icons.svg#${t}"></use>\n                        </svg>\n                        <div class="${r}">\n                            <div class="${c}">\n                                <span>${i}</span>&deg;\n                            </div>\n                            <svg  class="${o}">\n                                <use xlink:href="img/icons/icons.svg#${u}"></use>\n                            </svg>\n                        </div>\n                        <p class="${d}">${l}</p>\n                    </div>`;document.querySelector(`.${s}`).innerHTML=m})(e.list[0]),((e,n)=>{const t=document.querySelectorAll("input[name=units]:checked"),i=[Math.round(e.main.temp_max),Math.round(e.main.temp_min),Math.round(e.wind.speed),e.wind.deg,e.main.humidity,100*e.pop,g(n[0],"time"),g(n[1],"time")],s=["max temp","min temp","wind speed","wind deg","humidity","pop","sun rise","sun set"],a=[t[0].value,t[0].value,"wind","wind-deg","humidity","percip","sun-rise","sun-set"],_=["&deg;","&deg;","imperial"===t[0].value?"mph":"m/s","&deg;","&#37;","&#37;"," "," "];let r=[];for(let e=0;e<s.length;e++)r.push(`<div class="weather__inner__right__item">\n                <svg  class="weather__inner__right__item__icon">\n                    <use xlink:href="img/icons/icons.svg#${a[e]}"></use>\n                </svg>\n                <div class="weather__inner__right__item__label">\n                    ${s[e]}\n                </div>\n                <div class="${l}"><span>${i[e]}</span> ${_[e]}</div>\n            </div>`);document.querySelector(".weather__inner__right").innerHTML=r.join("")})(e.list[0],[e.city.sunrise,e.city.sunset]),(e=>{const t=e.list,i=[];for(let e=1;e<t.length;e++){const n={day:g(t[e].dt),time:g(t[e].dt,"time"),icon:t[e].weather[0].icon,temp:Math.round(t[e].main.temp),wind:Math.round(t[e].wind.speed),pop:Math.round(100*t[e].pop)};i.push($(n))}document.querySelector(`.${n}`).classList.add(`${m}`),document.querySelector(".forecast__inner__list").innerHTML=i.join("")})(e)},f=e=>{e.preventDefault();const n=document.querySelectorAll("#input-search"),t=document.querySelectorAll("input[name=units]:checked"),i={city:n[0].value,units:t[0].value};v(i).then((e=>y(e))).catch((e=>console.error(e)))};((n,t)=>{let i;n.addEventListener("keyup",(s=>function(s){clearTimeout(i),s.target.value?i=setTimeout((()=>{(async n=>{let t=[];try{return await fetch(`https://wft-geo-db.p.rapidapi.com/v1/geo/cities?types=city&minPopulation=1000000\n                &namePrefix=\n                ${n}`,e).then((e=>e.json())).then((e=>t.push(...e.data))),t}catch(e){console.error(e)}})(s.target.value).then((e=>function(e){t.innerHTML="";for(let n in e){const i=document.createElement("LI");i.classList.add("autocomplete__list__item"),i.innerHTML=`${e[n].name}`,i.setAttribute("id",`${e[n].name}`),t.appendChild(i)}t.addEventListener("click",(e=>{n.value=e.target.id,t.innerHTML="",f(e)}))}(e))).catch((e=>console.error(e)))}),600):t.innerHTML=""}(s)))})(document.getElementById("input-search"),document.getElementById("autocomplete-list")),document.getElementById("form").addEventListener("submit",(e=>f(e))),document.querySelectorAll(".header__inner__units__input").forEach((e=>{e.addEventListener("change",(e=>(e=>{e.preventDefault();const n=document.querySelectorAll("#input-search");if(""!==n[0].value){const e=document.querySelectorAll("input[name=units]:checked"),t={city:n[0].value,units:e[0].value};v(t).then((e=>y(e)))}})(e)))}))})();